# Техническое задание: Survey приложение на Next.js

## 1. Общее описание проекта

**Название проекта:** Survey App  
**Технологический стек:** Next.js 15+, React, TypeScript, Tailwind CSS  
**Цель:** Создание интерактивного приложения для проведения опросов с современным UI/UX

## 2. Архитектура приложения

### 2.1 Структура проекта
```
survey-app/
├── src/
│   ├── app/
│   │   ├── layout.tsx
│   │   ├── page.tsx
│   │   └── survey/
│   │       ├── [id]/
│   │       │   └── page.tsx
│   │       └── results/
│   │           └── page.tsx
│   ├── components/
│   │   ├── ui/
│   │   │   ├── Button.tsx
│   │   │   ├── ProgressBar.tsx
│   │   │   └── QuestionCard.tsx
│   │   ├── Survey/
│   │   │   ├── SurveyHeader.tsx
│   │   │   ├── QuestionTypes/
│   │   │   └── Navigation.tsx
│   │   └── Layout/
│   ├── lib/
│   │   ├── types.ts
│   │   ├── utils.ts
│   │   └── api.ts
│   ├── hooks/
│   └── styles/
├── public/
└── package.json
```

### 2.2 Технологии
- **Framework:** Next.js 14+ (App Router)
- **Language:** TypeScript
- **Styling:** Tailwind CSS
- **State Management:** React Context API / Zustand
- **Database:** JSON файлы / Supabase / Firebase (на выбор)
- **Fonts:** Euclid Circular B

## 3. Функциональные требования

### 3.1 Основные функции

#### 3.1.1 Главная страница опроса
- **Компоненты:**
  - Логотип приложения (верхний левый угол)
  - Прогресс-бар с индикатором "1/22" 
  - Основная область с вопросом
  - Кнопка "Next" (неактивна до выбора ответа)
  - Футер с согласием на условия использования

#### 3.1.2 Типы вопросов
1. **Single Choice** - выбор одного варианта
2. **Multiple Choice** - выбор нескольких вариантов  
3. **Text Input** - текстовый ввод
4. **Rating Scale** - шкала оценки
5. **Yes/No** - бинарный выбор

#### 3.1.3 Навигация
- Кнопка "Next" для перехода к следующему вопросу
- Кнопка "Back" для возврата к предыдущему вопросу
- Автоматическое сохранение ответов
- Валидация обязательных полей

### 3.2 Дополнительные функции
- Адаптивный дизайн (мобильные устройства)
- Анимации переходов между вопросами
- Сохранение прогресса в localStorage
- Экспорт результатов

## 4. UI/UX Требования

### 4.1 Цветовая палитра
```css
:root {
  --gray-3: #828282;
  --violet: #6f4bff;
  --gray-5: #E0E0E0;
  --black: #080a16;
  --white: #FFFFFF;
}
```

### 4.2 Типографика
- **Основной шрифт:** Euclid Circular B
- **Размеры:**
  - Заголовки: 24px (Medium)
  - Основной текст: 20px (Regular)
  - Вспомогательный текст: 16px (Regular)

### 4.3 Компоненты

#### 4.3.1 Прогресс-бар
- Ширина: 280px
- Высота: 8px
- Цвет заполнения: #6f4bff
- Цвет фона: #E0E0E0
- Скругление: 16px

#### 4.3.2 Кнопки
- **Primary Button:**
  - Фон: #6f4bff
  - Текст: #FFFFFF
  - Высота: 56px
  - Скругление: 16px
  - Состояния: default, hover, disabled

#### 4.3.3 Карточки вопросов
- Фон: #FFFFFF
- Тень: subtle shadow
- Скругление: 12px
- Отступы: 24px

## 5. Техническая реализация

### 5.1 Структура данных

#### 5.1.1 Survey Interface
```typescript
interface Survey {
  id: string;
  title: string;
  description?: string;
  questions: Question[];
  settings: SurveySettings;
}

interface Question {
  id: string;
  type: 'single' | 'multiple' | 'text' | 'rating' | 'boolean';
  title: string;
  description?: string;
  required: boolean;
  options?: Option[];
  validation?: ValidationRule[];
}

interface Option {
  id: string;
  text: string;
  value: string;
}

interface SurveySettings {
  allowBack: boolean;
  showProgress: boolean;
  randomizeQuestions: boolean;
}
```

#### 5.1.2 Response Interface
```typescript
interface SurveyResponse {
  surveyId: string;
  userId?: string;
  answers: Answer[];
  startedAt: Date;
  completedAt?: Date;
  currentQuestionIndex: number;
}

interface Answer {
  questionId: string;
  value: string | string[] | number;
  answeredAt: Date;
}
```

### 5.2 Ключевые компоненты

#### 5.2.1 SurveyProvider (Context)
```typescript
interface SurveyContextType {
  survey: Survey | null;
  currentQuestion: number;
  answers: Record<string, any>;
  isLoading: boolean;
  nextQuestion: () => void;
  prevQuestion: () => void;
  saveAnswer: (questionId: string, answer: any) => void;
  submitSurvey: () => Promise<void>;
}
```

#### 5.2.2 QuestionRenderer
- Динамический рендеринг вопросов по типу
- Валидация ответов
- Анимации переходов

#### 5.2.3 ProgressTracker
- Отображение текущего прогресса
- Визуальный индикатор заполнения

### 5.3 API Endpoints (если нужен бэкенд)
```
GET /api/surveys/:id - получить опрос
POST /api/surveys/:id/responses - сохранить ответ
GET /api/surveys/:id/results - получить результаты
```

## 6. Этапы разработки

### Этап 1: Настройка проекта (1-2 дня)
- [ ] Инициализация Next.js проекта
- [ ] Настройка TypeScript и Tailwind CSS
- [ ] Подключение шрифтов Euclid Circular B
- [ ] Создание базовой структуры папок

### Этап 2: UI компоненты (2-3 дня)
- [ ] Создание базовых UI компонентов (Button, ProgressBar)
- [ ] Реализация компонентов для разных типов вопросов
- [ ] Создание макета страницы опроса
- [ ] Адаптивная верстка

### Этап 3: Логика приложения (3-4 дня)
- [ ] Реализация Context API для управления состоянием
- [ ] Логика навигации между вопросами
- [ ] Валидация и сохранение ответов
- [ ] Интеграция с localStorage

### Этап 4: Дополнительные функции (2-3 дня)
- [ ] Анимации и переходы
- [ ] Страница результатов
- [ ] Экспорт данных
- [ ] Оптимизация производительности

### Этап 5: Тестирование и деплой (1-2 дня)
- [ ] Unit тесты для ключевых компонентов
- [ ] E2E тестирование
- [ ] Деплой на Vercel/Netlify

## 7. Критерии приемки

### 7.1 Функциональность
- ✅ Пользователь может проходить опрос последовательно
- ✅ Все типы вопросов работают корректно
- ✅ Прогресс сохраняется при перезагрузке страницы
- ✅ Валидация работает для обязательных полей
- ✅ Адаптивный дизайн на всех устройствах

### 7.2 Производительность
- ✅ Время загрузки страницы < 2 секунд
- ✅ Плавные анимации (60 FPS)
- ✅ Оптимизированные изображения и шрифты

### 7.3 UX/UI
- ✅ Дизайн соответствует макету Figma
- ✅ Интуитивная навигация
- ✅ Четкие состояния кнопок и элементов
- ✅ Доступность (WCAG 2.1 AA)

## 8. Дополнительные соображения

### 8.1 SEO
- Мета-теги для каждой страницы
- Open Graph разметка
- Структурированные данные

### 8.2 Безопасность
- Валидация данных на клиенте и сервере
- Защита от XSS атак
- Rate limiting для API

### 8.3 Аналитика
- Отслеживание прохождения опросов
- Метрики конверсии
- A/B тестирование интерфейса

---

**Примерное время разработки:** 10-15 рабочих дней  
**Команда:** 1-2 разработчика  
**Бюджет:** По договоренности

## 9. Рекомендации по библиотекам для Survey-приложений

### 9.1 SurveyJS

SurveyJS - наиболее полная и функциональная библиотека для создания опросов:

- **Возможности**:
  - Модель опроса на основе JSON
  - Множество типов вопросов (одиночный выбор, множественный выбор, текстовый ввод, рейтинг)
  - Настраиваемые темы оформления
  - Валидация форм
  - Аналитика опросов
  - Конструктор опросов с drag-and-drop
  
- **Интеграция с Next.js**: Требует некоторой настройки, поскольку не полностью поддерживает SSR (Server-Side Rendering)

- **Документация**: [SurveyJS Documentation](https://surveyjs.io/form-library/documentation/get-started-react)

- **Установка**: 
  ```bash
  npm install survey-react-ui --save
  ```

### 9.2 React Hook Form

Для более кастомных реализаций отлично подходит React Hook Form:

- **Возможности**:
  - Легковесная и производительная библиотека
  - Встроенная валидация
  - Минимальные перерендеры
  - Поддержка TypeScript
  - Удобное управление состоянием формы
  
- **Преимущества**: Отлично подходит для производительности и кастомизации

- **Ограничения**: Потребуется создание специфичных для опросов компонентов

### 9.3 Formik

Еще одна популярная опция для форм в React:

- **Возможности**:
  - Валидация форм
  - Обработка ошибок
  - Отправка формы
  - Поддержка TypeScript

- **Ограничения**: Как и в случае с React Hook Form, потребуется создание специфичных компонентов для опросов

### 9.4 Рекомендации по выбору

На основе требований проекта:

1. **Если нужно готовое решение для опросов**: SurveyJS будет лучшим выбором, поскольку уже реализует большинство необходимых типов вопросов (одиночный выбор, множественный выбор, текстовый ввод, рейтинг, да/нет) и имеет систему настройки тем.

2. **Если предпочтительнее больший контроль и кастомизация**: Используйте React Hook Form с Tailwind CSS для создания собственных компонентов опроса в соответствии с вашими спецификациями.

3. **Для проектов на TypeScript**: Все упомянутые библиотеки поддерживают TypeScript, при этом Typescript React Form специально оптимизирована для него.
